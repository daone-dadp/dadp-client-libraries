# DADP AOP Library v3.17.1 Release Notes

## π‰ λ¦΄λ¦¬μ¦ μ •λ³΄

**λ²„μ „**: 3.17.1  
**λ¦΄λ¦¬μ¦ μΌμ**: 2025-12-09  
**λ°°ν¬ μƒνƒ**: β οΈ **κ°λ° μ™„λ£, Maven Central λ―Έλ°°ν¬** (λ°°ν¬ μ „)  
**Java λ²„μ „**: **Java 17 μ΄μƒ** (κ¶μ¥)  
**μ£Όμ” κ°μ„ μ‚¬ν•­**: (κ°λ° μ¤‘)

---

## β οΈ μ¤‘μ”: λ²„μ „ νΈν™μ„±

**μ΄μ „ λ²„μ „κ³Όμ νΈν™μ„±:**

- **v3.17.0** β†’ **v3.17.1**: νΈν™λ¨ (minor λ²„μ „ μ¦κ°€, ν•μ„ νΈν™μ„± μ μ§€)
- **μ„¤μ • λ³€κ²½ λ¶ν•„μ”**: κΈ°μ΅΄ μ„¤μ • κ·Έλ€λ΅ μ‚¬μ© κ°€λ¥
- **μ½”λ“ λ³€κ²½ λ¶ν•„μ”**: κΈ°μ΅΄ μ½”λ“ κ·Έλ€λ΅ μ‚¬μ© κ°€λ¥

---

## π“‹ μ£Όμ” λ³€κ²½μ‚¬ν•­

### β… includeStats μ—­ν•  λ…ν™•ν™” λ° μ—”μ§„ μ”μ²­ κ°μ„ 

**λ³€κ²½ μ‚¬ν•­**: `includeStats` νλΌλ―Έν„°κ°€ AOP λ΅κΉ…μ©μΌλ΅λ§ μ‚¬μ©λλ„λ΅ μμ •ν•κ³ , μ—”μ§„ μ”μ²­μ—μ„ `includeStats` νλΌλ―Έν„°λ¥Ό μ κ±°

**μ΄μ „ λ™μ‘**:
- `includeStats=true`μΌ λ• μ—”μ§„μ— `includeStats=true`λ¥Ό μ „λ‹¬ν•μ—¬ μ—”μ§„ μ‘λ‹µμ— μƒμ„Έ ν†µκ³„ μ •λ³΄λ¥Ό μ”κµ¬
- AOPμ—μ„ `cryptoService.encrypt(data, policy, false)` ν•νƒλ΅ `includeStats` νλΌλ―Έν„°λ¥Ό μ „λ‹¬

**λ³€κ²½ ν›„**:
- `includeStats=true`μΌ λ• AOP λ λ²¨μ—μ„λ§ μƒμ„Έ λ΅κ·Έλ¥Ό μ¶λ ¥ (μ•”λ³µνΈν™” μν–‰, κ²°κ³Ό μΌλ¶€ κ°’)
- μ—”μ§„ μ”μ²­μ—μ„ `includeStats` νλΌλ―Έν„°λ¥Ό μ™„μ „ν μ κ±° (μ—”μ§„μ€ μλ™μΌλ΅ ν†µκ³„ μμ§‘)
- AOPμ—μ„ `cryptoService.encrypt(data, policy)` ν•νƒλ΅ νΈμ¶ (includeStats νλΌλ―Έν„° μ—†μ)
- `HubCryptoService`μ—μ„ `EncryptRequest`/`DecryptRequest`μ— `includeStats` ν•„λ“λ¥Ό μ„¤μ •ν•μ§€ μ•μ
- `includeStats`λ” AOP μμ²΄μ λ΅κΉ… κΈ°λ¥μ΄λ©°, μ—”μ§„ ν†µκ³„ μμ§‘κ³Όλ” λ¬΄κ΄€

**μν–¥**:
- β… `includeStats`λ” AOP λ΅κΉ…μ©μΌλ΅λ§ μ‚¬μ©λ¨
- β… μ—”μ§„ ν†µκ³„ μμ§‘μ€ `includeStats`μ™€ λ¬΄κ΄€ν•κ² ν•­μƒ μλ™ μν–‰λ¨
- β… μ—”μ§„ μ”μ²­ ν¬κΈ° κ°μ† (λ¶ν•„μ”ν• νλΌλ―Έν„° μ κ±°)
- β… κΈ°μ΅΄ μ½”λ“ λ³€κ²½ λ¶ν•„μ” (λ™μ‘ λ°©μ‹λ§ λ³€κ²½)

### β… Page/Slice λ°ν™ νƒ€μ… μ§€μ› μ¶”κ°€

**λ³€κ²½ μ‚¬ν•­**: `@Decrypt` μ–΄λ…Έν…μ΄μ…μ΄ `Page<T>`μ™€ `Slice<T>` λ°ν™ νƒ€μ…μ„ μ§€μ›ν•λ„λ΅ κ°μ„ 

**μ΄μ „ λ™μ‘**:
- `Page<T>`μ™€ `Slice<T>` λ°ν™ νƒ€μ…μ€ λ―Έμ§€μ› μƒνƒ
- `findAll(Pageable)` λ©”μ„λ“μ— `@Decrypt`λ¥Ό μ μ©ν•΄λ„ λ³µνΈν™”λμ§€ μ•μ
- μ‚¬μ©μ κ΄€λ¦¬ λ“±μ—μ„ λ¦¬λ―ΈνΈλ¥Ό μ μ©ν•λ ¤λ©΄ `getContent()`λ΅ μ¶”μ¶ ν›„ μλ™ λ³µνΈν™” ν•„μ”

**λ³€κ²½ ν›„**:
- `Page<T>`μ™€ `Slice<T>` λ°ν™ νƒ€μ…μ„ μλ™μΌλ΅ κ°μ§€ν•μ—¬ μ²λ¦¬
- `Page`μ `content`λ¥Ό μ¶”μ¶ν•μ—¬ λ³µνΈν™”ν• ν›„, λ³µνΈν™”λ `content`λ΅ μƒλ΅μ΄ `Page` μƒμ„±
- `Slice`μ `content`λ¥Ό μ¶”μ¶ν•μ—¬ λ³µνΈν™”ν• ν›„, λ³µνΈν™”λ `content`λ΅ μƒλ΅μ΄ `Slice` μƒμ„±
- Repositoryμ `findAll(Pageable)` λ©”μ„λ“μ— `@Decrypt`λ¥Ό μ μ©ν•λ©΄ μλ™μΌλ΅ λ³µνΈν™”λ¨

**μν–¥**:
- β… `findAll(Pageable)` λ©”μ„λ“μ— `@Decrypt` μ μ© μ‹ μλ™ λ³µνΈν™” μ§€μ›
- β… μ‚¬μ©μ κ΄€λ¦¬ λ“±μ—μ„ λ¦¬λ―ΈνΈ μ μ© μ‹μ—λ„ μλ™ λ³µνΈν™” λ™μ‘
- β… κΈ°μ΅΄ μ½”λ“ λ³€κ²½ λ¶ν•„μ” (Repositoryμ— `@Decrypt`λ§ μ μ©ν•λ©΄ λ¨)
- β… λ°°μΉ λ³µνΈν™” μ§€μ› (Page/Sliceμ contentλ¥Ό CollectionμΌλ΅ μ²λ¦¬)

**κµ¬ν„ μ„Έλ¶€μ‚¬ν•­**:
- `EncryptionAspect`μ— `processPageDecryption()` λ° `processSliceDecryption()` λ©”μ„λ“ μ¶”κ°€
- Spring Dataμ `PageImpl`μ„ μ‚¬μ©ν•μ—¬ λ³µνΈν™”λ contentλ΅ μƒλ΅μ΄ Page/Slice μƒμ„±
- Pageable, totalElements, hasNext λ“± λ©”νƒ€λ°μ΄ν„° λ³΄μ΅΄

### β… Stream λ°ν™ νƒ€μ… Read-Only νΈλμ­μ… λ¬Έμ  ν•΄κ²°

**λ³€κ²½ μ‚¬ν•­**: Stream λ°ν™ νƒ€μ… λ³µνΈν™” μ‹ read-only νΈλμ­μ…μ—μ„ UPDATE μΏΌλ¦¬ μ‹λ„λ΅ μΈν• μ—λ¬λ¥Ό ν•΄κ²°

**μ΄μ „ λ™μ‘**:
- Streamμ„ Listλ΅ μμ§‘ν• ν›„ λ³µνΈν™”λ¥Ό μν–‰ν•λ©΄ μ—”ν‹°ν‹° ν•„λ“κ°€ λ³€κ²½λ¨
- Hibernateκ°€ μ΄λ¥Ό κ°μ§€ν•κ³  μ—”ν‹°ν‹°λ¥Ό dirtyλ΅ λ§ν‚Ή
- νΈλμ­μ… μ»¤λ°‹ μ‹ Hibernateκ°€ UPDATE μΏΌλ¦¬ μ‹¤ν–‰ μ‹λ„
- `@Transactional(readOnly = true)`λ΅ μΈν•΄ UPDATE λ¶κ°€λ¥ν•μ—¬ μ—λ¬ λ°μƒ
- μ—λ¬ λ©”μ‹μ§€: `Connection is read-only. Queries leading to data modification are not allowed`

**λ³€κ²½ ν›„**:
- Streamμ„ Listλ΅ μμ§‘ν• μ§ν›„, λ³µνΈν™” μ „μ— λ¨λ“  μ—”ν‹°ν‹°λ¥Ό detach
- detachλ μ—”ν‹°ν‹°λ” λ³µνΈν™” ν›„μ—λ„ dirtyλ΅ λ§ν‚Ήλμ§€ μ•μ
- read-only νΈλμ­μ…μ—μ„ UPDATE μΏΌλ¦¬ μ‹λ„ μ—†μ
- `handleStreamDecryption()` λ©”μ„λ“μ— EntityManager νλΌλ―Έν„° μ¶”κ°€
- Stream β†’ List μμ§‘ ν›„ μ¦‰μ‹ λ¨λ“  μ—”ν‹°ν‹°λ¥Ό detachν•λ” λ΅μ§ μ¶”κ°€

**μν–¥**:
- β… Stream λ°ν™ νƒ€μ…μ—μ„ read-only νΈλμ­μ… μ •μƒ λ™μ‘
- β… `getAllUsersAsStream()`, `getUsersByNameAsStream()` λ“± λ©”μ„λ“ μ •μƒ λ™μ‘
- β… κΈ°μ΅΄ μ½”λ“ λ³€κ²½ λ¶ν•„μ” (λ‚΄λ¶€ λ΅μ§λ§ κ°μ„ )
- β… λ³µνΈν™” κΈ°λ¥ μ •μƒ λ™μ‘ (detach ν›„μ—λ„ λ³µνΈν™” κ°€λ¥)

**κµ¬ν„ μ„Έλ¶€μ‚¬ν•­**:
- `EncryptionAspect.handleStreamDecryption()` λ©”μ„λ“μ— EntityManager νλΌλ―Έν„° μ¶”κ°€
- Stream β†’ List μμ§‘ μ§ν›„ `em.detach(entity)` νΈμ¶ν•μ—¬ λ¨λ“  μ—”ν‹°ν‹°λ¥Ό detach
- `handleDecrypt()` λ©”μ„λ“μ—μ„ `handleStreamDecryption()` νΈμ¶ μ‹ EntityManager μ „λ‹¬
- detachλ μ—”ν‹°ν‹°λ” λ³µνΈν™” ν›„μ—λ„ Hibernateμ λ³€κ²½ μ¶”μ  λ€μƒμ΄ μ•„λ‹

### (κΈ°νƒ€ κ°λ° μ¤‘)

μ΄ λ²„μ „μ€ ν„μ¬ κ°λ° μ¤‘μ΄λ©°, μ•„μ§ λ°°ν¬λμ§€ μ•μ•μµλ‹λ‹¤.

---

## π”§ λ³€κ²½λ API

(κ°λ° μ¤‘)

---

## π“ μ„±λ¥ κ°μ„ 

(κ°λ° μ¤‘)

---

## π”„ λ§μ΄κ·Έλ μ΄μ… κ°€μ΄λ“

### 3.17.0 β†’ 3.17.1

(κ°λ° μ¤‘)

**νΈν™μ„±**: μ™„μ „ νΈν™ (μ„¤μ • λ³€κ²½ λ° μ½”λ“ λ³€κ²½ λ¶ν•„μ”)

---

## π› μ•λ ¤μ§„ μ΄μ

(μ—†μ)

### ν•΄κ²°λ μ΄μ

- β… **Stream λ°ν™ νƒ€μ… read-only νΈλμ­μ… λ¬Έμ **: Stream λ³µνΈν™” μ‹ read-only νΈλμ­μ…μ—μ„ UPDATE μΏΌλ¦¬ μ‹λ„λ΅ μΈν• μ—λ¬ ν•΄κ²° (2025-12-12)

---

## π“ νΈν™μ„± λ§¤νΈλ¦­μ¤

### Java λ²„μ „

| Java λ²„μ „ | μ§€μ› μ—¬λ¶€ | λΉ„κ³  |
|-----------|----------|------|
| Java 8    | β μ§€μ› μ• ν•¨ | Java 8 λ°”μ΄νΈμ½”λ“λ” νΈν™λμ§€λ§, Spring Boot 3.x μμ΅΄μ„±μΌλ΅ μΈν•΄ Java 17 μ΄μƒ κ¶μ¥ |
| Java 11   | β… μ§€μ›   | **ν•μ„ νΈν™μ„±** (Java 17 λ°”μ΄νΈμ½”λ“λ” Java 11μ—μ„ μ‹¤ν–‰ κ°€λ¥) |
| Java 17   | β… μ§€μ›   | **κ¶μ¥ λ²„μ „** (μ»΄νμΌ νƒ€κ²) |
| Java 21   | β… μ§€μ›   | **ν•μ„ νΈν™μ„±** (Java 17 λ°”μ΄νΈμ½”λ“λ” Java 21μ—μ„ μ‹¤ν–‰ κ°€λ¥) |

### Spring Boot λ²„μ „

| Spring Boot λ²„μ „ | μ§€μ› μ—¬λ¶€ | λΉ„κ³  |
|-----------------|----------|------|
| Spring Boot 2.x | β μ§€μ› μ• ν•¨ | Spring Boot 3.x μμ΅΄μ„± μ‚¬μ© |
| Spring Boot 3.x | β… μ§€μ›   | **κ¶μ¥ λ²„μ „** (3.2.12) |

### μμ΅΄μ„±

- **dadp-hub-crypto-lib**: 1.1.0 (μλ™ ν¬ν•¨)
- **Spring Boot**: 3.2.12
- **Spring AOP**: Spring Bootμ— ν¬ν•¨
- **AspectJ**: Spring Bootμ— ν¬ν•¨

---

## π”— κ΄€λ ¨ λ¬Έμ„

- [CHANGELOG.md](./CHANGELOG.md)
- [μ‚¬μ© κ°€μ΄λ“](./dadp-aop-user-guide.md)
- [μ΄μ „ λ²„μ „ λ¦΄λ¦¬μ¦ λ…ΈνΈ](./RELEASE_NOTES_v3.17.0.md)
- [ν†µν•© λ¦΄λ¦¬μ¦ λ…ΈνΈ](../../docs/releases/RELEASE_v4.8.0.md)
- [Maven Central κ²€μƒ‰](https://search.maven.org/search?q=io.github.daone-dadp:dadp-aop)

---

## π“ μ°Έκ³ μ‚¬ν•­

### κ°λ° μƒνƒ

μ΄ λ²„μ „μ€ **κ°λ° μ¤‘**μ΄λ©°, μ•„μ§ Maven Centralμ— λ°°ν¬λμ§€ μ•μ•μµλ‹λ‹¤.

### λ°°ν¬ μμ •

- λ°°ν¬ μΌμ •: (λ―Έμ •)
- λ°°ν¬ μ „ μ²΄ν¬λ¦¬μ¤νΈ:
  - [ ] λΉλ“ ν…μ¤νΈ μ™„λ£
  - [ ] λ΅μ»¬ ν…μ¤νΈ μ™„λ£
  - [ ] Java 17 ν™κ²½ ν…μ¤νΈ μ™„λ£
  - [ ] λ¬Έμ„ μ—…λ°μ΄νΈ μ™„λ£

### λ²„μ „ μ„ νƒ κ°€μ΄λ“

| Java λ²„μ „ | κ¶μ¥ λ²„μ „ | μ‚¬μ© κ°€λ¥ λ²„μ „ |
|-----------|----------|---------------|
| Java 8    | β μ§€μ› μ• ν•¨ | - |
| Java 11   | `3.17.0` (ν„μ¬ λ°°ν¬λ¨) | `3.17.0`λ§ κ°€λ¥ |
| Java 17   | `3.17.0` (ν„μ¬ λ°°ν¬λ¨) | `3.17.0`λ§ κ°€λ¥ |
| Java 21   | `3.17.0` (ν„μ¬ λ°°ν¬λ¨) | `3.17.0`λ§ κ°€λ¥ |

**μ„¤λ…**:
- **Java 8**: μ§€μ› μ• ν•¨ (Spring Boot 3.x μμ΅΄μ„±μΌλ΅ μΈν•΄ Java 17 μ΄μƒ ν•„μ”)
- **Java 11/17/21**: `3.17.0` μ‚¬μ© (ν„μ¬ λ°°ν¬λ¨)
- **3.17.1**: μ•„μ§ λ°°ν¬λμ§€ μ•μ (κ°λ° μ¤‘)

---

## π‘¥ κΈ°μ—¬μ

- DADP Development Team

---

**λ¦΄λ¦¬μ¦ λ‚ μ§**: 2025-12-12 (μµμΆ… μ—…λ°μ΄νΈ)  
**μ΄μ „ λ²„μ „**: 3.17.0  
**Java λ²„μ „**: Java 17 μ΄μƒ (κ¶μ¥)  
**λ°°ν¬ μƒνƒ**: β οΈ λ°°ν¬ μ „

