# DADP JDBC Wrapper v4.8.1 Release Notes

## π‰ λ¦΄λ¦¬μ¦ μ •λ³΄

**λ²„μ „**: 4.8.1  
**λ¦΄λ¦¬μ¦ μΌμ**: 2025-12-15  
**λ°°ν¬ μƒνƒ**: β οΈ **κ°λ° μ™„λ£, Maven Central λ―Έλ°°ν¬** (λ°°ν¬ μ „)  
**Java λ²„μ „**: **Java 8 μ „μ©** (λ³„λ„ λ²„μ „)  
**μ£Όμ” κ°μ„ μ‚¬ν•­**: μ—”μ§„ ν†µκ³„ μμ§‘ κ°μ„ , ν†µκ³„ μ„¤μ • μκµ¬ μ €μ¥ κΈ°λ¥ μ¶”κ°€

---

## β οΈ μ¤‘μ”: λ²„μ „ λ²νΈ μ²΄κ³„

**λ²„μ „ λ²νΈλ” Java λ²„μ „μ„ λ‚νƒ€λƒ…λ‹λ‹¤:**

- **`4.17.0`** = Java 17 μ΄μƒμ© (κΈ°λ³Έ λ²„μ „)
- **`4.8.0`** = Java 8 μ „μ© (μ΄μ „ λ²„μ „)
- **`4.8.1`** = Java 8 μ „μ© (μ΄ λ²„μ „, λ°°ν¬ μ „)

Java 8 ν™κ²½μ—μ„λ” λ°λ“μ‹ Java 8 μ „μ© λ²„μ „μ„ μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.

---

## π“‹ μ£Όμ” λ³€κ²½μ‚¬ν•­

### β… μ—”μ§„ ν†µκ³„ μμ§‘ κ°μ„ 

**λ¬Έμ  ν•΄κ²°**: Wrapper ν…μ¤νΈ μ•±μ—μ„ μλ™ μ•”νΈν™” ν…μ¤νΈ μ‹ ν†µκ³„κ°€ μμ§‘λμ§€ μ•λ λ¬Έμ  ν•΄κ²°

**λ³€κ²½ μ‚¬ν•­**:
- `DirectCryptoAdapter`μ™€ `HubCryptoAdapter`μ—μ„ `includeStats` νλΌλ―Έν„° μ „λ‹¬ μ κ±°
- μ—”μ§„μ΄ `includeStats`μ™€ λ¬΄κ΄€ν•κ² ν•­μƒ μλ™μΌλ΅ ν†µκ³„λ¥Ό μμ§‘ν•λ„λ΅ λ³€κ²½
- Wrapperλ¥Ό ν†µν• λ¨λ“  μ•”λ³µνΈν™” μ”μ²­μ΄ μ—”μ§„ ν†µκ³„μ— μλ™μΌλ΅ κΈ°λ΅λ¨

**κΈ°μ μ  λ°°κ²½**:
- `includeStats`λ” AOP λ΅κΉ…μ© νλΌλ―Έν„°μ΄λ©°, μ—”μ§„ ν†µκ³„ μμ§‘κ³Όλ” λ¬΄κ΄€
- μ—”μ§„μ€ λ¨λ“  μ•”λ³µνΈν™” μ”μ²­μ— λ€ν•΄ μλ™μΌλ΅ ν†µκ³„ μμ§‘ (μ‹λ„μ, μ§€μ—°μ‹κ°„)
- μ„±κ³µ/μ‹¤ν¨ κµ¬λ¶„ μ—†μ΄ μ‹λ„μλ§ μΉ΄μ΄νΈν•λ„λ΅ μ—”μ§„ μΈ΅ κ°μ„ λ¨

**μν–¥**:
- β… Wrapperλ¥Ό ν†µν• μ•”λ³µνΈν™” μ”μ²­λ„ μ—”μ§„ ν†µκ³„μ— μ •μƒμ μΌλ΅ κΈ°λ΅λ¨
- β… Hub λ€μ‹λ³΄λ“μ—μ„ Wrapper μ‚¬μ© ν†µκ³„ ν™•μΈ κ°€λ¥
- β… κΈ°μ΅΄ μ½”λ“ λ³€κ²½ λ¶ν•„μ” (ν¬λ…ν• κ°μ„ )

### β… ν†µκ³„ μ„¤μ • μκµ¬ μ €μ¥ κΈ°λ¥ μ¶”κ°€

**κ°μ„  μ‚¬ν•­**: μ¤ν‚¤λ§ λ™κΈ°ν™” μ‹ ν†µκ³„ μ„¤μ •λ„ ν•¨κ» μκµ¬ μ €μ¥ν•μ—¬ Hub μ—°κ²° μ—†μ΄λ„ μ‚¬μ© κ°€λ¥

**λ³€κ²½ μ‚¬ν•­**:
- `EndpointStorage`μ— ν†µκ³„ μ„¤μ • ν•„λ“ μ¶”κ°€ (`statsAggregatorEnabled`, `statsAggregatorUrl`, `statsAggregatorMode`)
- Hubμ—μ„ λ°›μ€ ν†µκ³„ μ„¤μ •μ„ `~/.dadp-wrapper/crypto-endpoints.json`μ— μ €μ¥
- μ¤ν‚¤λ§ λ™κΈ°ν™” μ‹ μ—”λ“ν¬μΈνΈ μ •λ³΄μ™€ ν†µκ³„ μ„¤μ •μ„ ν• λ²μ— μ €μ¥

**κΈ°μ μ  λ°°κ²½**:
- κΈ°μ΅΄μ—λ” μ—”λ“ν¬μΈνΈ μ •λ³΄λ§ μκµ¬ μ €μ¥ν–μΌλ‚, ν†µκ³„ μ„¤μ •λ„ ν•¨κ» μ €μ¥ν•μ—¬ Hub μ—°κ²° μ—†μ΄ μ‚¬μ© κ°€λ¥
- Proxy μΈμ¤ν„΄μ¤λ³„ ν†µκ³„ μ„¤μ •μ΄ μμΌλ©΄ ν•΄λ‹Ή μ„¤μ • μ‚¬μ©, μ—†μΌλ©΄ μ „μ—­ μ„¤μ • μ‚¬μ©
- μ „μ†΅ λ¨λ“λ” ν•­μƒ Hubμ μ „μ—­ μ„¤μ • μ‚¬μ©

**μν–¥**:
- β… Hub μ—°κ²° μ—†μ΄λ„ ν†µκ³„ μ„¤μ • μ‚¬μ© κ°€λ¥
- β… μ¤ν‚¤λ§ λ™κΈ°ν™” μ‹ λ¨λ“  μ„¤μ •μ΄ ν• λ²μ— μ €μ¥λμ–΄ ν¨μ¨μ 
- β… κΈ°μ΅΄ μ½”λ“μ™€ ν•μ„ νΈν™μ„± μ μ§€ (κΈ°μ΅΄ λ©”μ„λ“ μ μ§€)

### β… Wrapper SQL μ΄λ²¤νΈ ν†µκ³„ μ „μ†΅ (Aggregator, Best-effort)

- ν†µκ³„ μ•± μ‚¬μ© μ‹(`statsAggregatorEnabled=true`) SQL μ‹¤ν–‰λ§λ‹¤ `/aggregator/api/v1/events/batch`λ΅ μ „μ†΅ (μ‹¤ν¨ μ‹ DROP).
- ν—¤λ” `X-DADP-TENANT`μ— Hubκ°€ λ°κΈ‰ν• Wrapper appId μ‚¬μ©.
- νμ΄λ΅λ“: `batchId`/`sourceType=WRAPPER`/`sourceId=appId` λ° `events[].eventId/SQL_EXEC/occurredAt/datasourceId/sqlHash(SHA-256 raw)/operation/durationMs/errorFlag`.
- μ¶”κ°€: λ§λ²„νΌ/ν”λ¬μ‹ μµμ…(`buffer.maxEvents`, `flush.maxEvents`, `flush.intervalMillis`, `maxBatchSize`, `maxPayloadBytes`), μƒν”λ§(`samplingRate`), μ •κ·ν™” ν”λκ·Έ(`normalizeSqlEnabled`), μ „μ†΅μµμ…(`includeSqlNormalized`, `includeParams` κΈ°λ³Έ false), λ„¤νΈμ›ν¬/μ¬μ‹λ„(`http.connectTimeoutMillis`, `http.readTimeoutMillis`, `retry.onFailure`) μμ© λ° μ μ©.
- λ―Έκµ¬ν„: μ‹¤μ  SQL μ •κ·ν™”/ν•΄μ‹ κ²€μ¦ λ΅μ§, params λ§μ¤ν‚ΉΒ·μ „μ†΅, κ³ κΈ‰ μ¬μ‹λ„/ν β†’ ν›„μ† μμ •. Hubκ°€ μµμ…μ„ λ‚΄λ ¤μ¤μ•Ό ν™μ„±ν™”λ¨.

---

## π”§ λ³€κ²½λ API

### `EndpointStorage`

#### μ¶”κ°€λ λ©”μ„λ“
- `saveEndpoints(String routingMode, String gatewayUrl, List<EngineEndpoint> engines, String apiBasePath, Boolean statsAggregatorEnabled, String statsAggregatorUrl, String statsAggregatorMode)`
  - ν†µκ³„ μ„¤μ • νλΌλ―Έν„°λ¥Ό λ°›λ” μ¤λ²„λ΅λ“ λ©”μ„λ“
  - κΈ°μ΅΄ λ©”μ„λ“λ” ν•μ„ νΈν™μ„±μ„ μ„ν•΄ μ μ§€

#### λ³€κ²½λ ν΄λμ¤
- `EndpointData`
  - `statsAggregatorEnabled` ν•„λ“ μ¶”κ°€
  - `statsAggregatorUrl` ν•„λ“ μ¶”κ°€
  - `statsAggregatorMode` ν•„λ“ μ¶”κ°€

### `SchemaSyncService`

#### λ³€κ²½λ ν΄λμ¤
- `EndpointInfo`
  - `cryptoUrl` ν•„λ“ μ¶”κ°€
  - `statsAggregatorEnabled` ν•„λ“ μ¶”κ°€
  - `statsAggregatorUrl` ν•„λ“ μ¶”κ°€
  - `statsAggregatorMode` ν•„λ“ μ¶”κ°€

#### λ³€κ²½λ λ©”μ„λ“
- `saveEndpointInfo(EndpointInfo endpointInfo)`
  - ν†µκ³„ μ„¤μ •λ„ ν•¨κ» `EndpointStorage`μ— μ €μ¥ν•λ„λ΅ μμ •

---

## π“ μ„±λ¥ κ°μ„ 

(κ°λ° μ¤‘)

---

## π”„ λ§μ΄κ·Έλ μ΄μ… κ°€μ΄λ“

### 4.8.0 β†’ 4.8.1 (Java 8 ν™κ²½)

**κΈ°μ΅΄ μ½”λ“λ” λ³€κ²½ λ¶ν•„μ”**:
- κΈ°μ΅΄ `saveEndpoints()` λ©”μ„λ“λ” κ·Έλ€λ΅ μ μ§€
- ν†µκ³„ μ„¤μ •μ΄ μ—†λ” κ²½μ° κΈ°λ³Έκ°’ μ‚¬μ© (enabled=false)

**μƒλ΅μ΄ κΈ°λ¥ μ‚¬μ©**:
- μ¤ν‚¤λ§ λ™κΈ°ν™” μ‹ μλ™μΌλ΅ ν†µκ³„ μ„¤μ •λ„ ν•¨κ» μ €μ¥λ¨
- μ €μ¥λ ν†µκ³„ μ„¤μ •μ€ `EndpointStorage.loadEndpoints()`λ΅ μ΅°ν κ°€λ¥

---

## π› μ•λ ¤μ§„ μ΄μ

(κ°λ° μ¤‘)

---

## π“ νΈν™μ„±

### Java λ²„μ „

| Java λ²„μ „ | μ§€μ› μ—¬λ¶€ | λΉ„κ³  |
|-----------|----------|------|
| Java 8    | β… μ§€μ›   | **μ΄ λ²„μ „μ νƒ€κ²** (μ»΄νμΌ νƒ€κ²) |
| Java 11   | β… μ§€μ›   | **ν•μ„ νΈν™μ„±** (Java 8 λ°”μ΄νΈμ½”λ“λ” Java 11μ—μ„ μ‹¤ν–‰ κ°€λ¥) |
| Java 17   | β… μ§€μ›   | **ν•μ„ νΈν™μ„±** (Java 8 λ°”μ΄νΈμ½”λ“λ” Java 17μ—μ„ μ‹¤ν–‰ κ°€λ¥) |
| Java 21   | β… μ§€μ›   | **ν•μ„ νΈν™μ„±** (Java 8 λ°”μ΄νΈμ½”λ“λ” Java 21μ—μ„ μ‹¤ν–‰ κ°€λ¥) |

**μ¤‘μ”**: 
- **4.8.1**μ€ Java 8λ΅ μ»΄νμΌλμ§€λ§, Java 11/17/21μ—μ„λ„ μ‹¤ν–‰ κ°€λ¥ν•©λ‹λ‹¤ (ν•μ„ νΈν™μ„±)
- **4.17.0**μ€ Java 17λ΅ μ»΄νμΌλμ–΄ Java 8μ—μ„λ” μ‹¤ν–‰ λ¶κ°€λ¥ν•©λ‹λ‹¤
- **κ¶μ¥**: Java 11/17 ν™κ²½μ—μ„λ” `4.17.0` λ²„μ „ μ‚¬μ© κ¶μ¥ (μµμ‹  κΈ°λ¥ λ° μ„±λ¥)

### ORM/Framework νΈν™μ„±

| ν”„λ μ„μ›ν¬ | μ•”νΈν™” | λ³µνΈν™” | λΉ„κ³  |
|-----------|--------|--------|------|
| **JdbcTemplate** | β… | β… | μ§μ ‘ μ»¬λΌλ… μ‚¬μ© |
| **Hibernate/JPA** | β… | β… | alias μλ™ λ³€ν™ |
| **MyBatis** | β… | β… | AS alias νμ‹± μ§€μ› |
| **jOOQ** | β… | β… | AS alias νμ‹± μ§€μ› |
| **QueryDSL** | β… | β… | AS alias νμ‹± μ§€μ› |

### Hub/Engine λ²„μ „

| μ»΄ν¬λ„νΈ | μµμ† λ²„μ „ | κ¶μ¥ λ²„μ „ |
|----------|----------|----------|
| **Hub** | 3.8.0 | 3.8.0+ |
| **Engine** | 3.8.0 | 3.8.0+ |

### μμ΅΄μ„±

- **dadp-hub-crypto-lib**: `1.1.0` (classifier: `java8`)
- **Spring Boot**: `2.7.18` (Java 8 μ§€μ›)
- **Jackson**: `2.13.5` (Java 8 νΈν™)

---

## π”— κ΄€λ ¨ λ¬Έμ„

- [CHANGELOG.md](CHANGELOG.md)
- [README.md](README.md)
- [Architecture Overview](../../docs/architecture-overview.md)
- [Engine Persistent Cache Design](../../docs/engine-persistent-cache-design.md)

---

## π“ μ°Έκ³ μ‚¬ν•­

### κ°λ° μƒνƒ

μ΄ λ²„μ „μ€ **κ°λ° μ¤‘**μ΄λ©°, μ•„μ§ Maven Centralμ— λ°°ν¬λμ§€ μ•μ•μµλ‹λ‹¤.

### λ°°ν¬ μμ •

- λ°°ν¬ μΌμ •: (λ―Έμ •)
- λ°°ν¬ μ „ μ²΄ν¬λ¦¬μ¤νΈ:
  - [ ] λΉλ“ ν…μ¤νΈ μ™„λ£
  - [ ] λ΅μ»¬ ν…μ¤νΈ μ™„λ£
  - [ ] Java 8 ν™κ²½ ν…μ¤νΈ μ™„λ£
  - [ ] λ¬Έμ„ μ—…λ°μ΄νΈ μ™„λ£

### λ²„μ „ μ„ νƒ κ°€μ΄λ“

| Java λ²„μ „ | κ¶μ¥ λ²„μ „ | μ‚¬μ© κ°€λ¥ λ²„μ „ |
|-----------|----------|---------------|
| Java 8    | `4.8.0` (ν„μ¬ λ°°ν¬λ¨) | `4.8.0`λ§ κ°€λ¥ |
| Java 11   | `4.17.0` (κ¶μ¥) | `4.8.0` λλ” `4.17.0` |
| Java 17   | `4.17.0` (κ¶μ¥) | `4.8.0` λλ” `4.17.0` |
| Java 21   | `4.17.0` (κ¶μ¥) | `4.8.0` λλ” `4.17.0` |

**μ„¤λ…**:
- **Java 8**: `4.8.0`λ§ μ‚¬μ© κ°€λ¥ (Java 17 λ°”μ΄νΈμ½”λ“λ” Java 8μ—μ„ μ‹¤ν–‰ λ¶κ°€)
- **Java 11/17/21**: `4.17.0` μ‚¬μ© κ¶μ¥ (μµμ‹  κΈ°λ¥), λλ” `4.8.0` μ‚¬μ© κ°€λ¥ (ν•μ„ νΈν™μ„±)
- **4.8.1**: μ•„μ§ λ°°ν¬λμ§€ μ•μ (κ°λ° μ¤‘)

---

## π™ κΈ°μ—¬μ

- DADP Development Team

---

**λ¦΄λ¦¬μ¦ λ‚ μ§**: 2025-12-15  
**μ΄μ „ λ²„μ „**: 4.8.0  
**Java λ²„μ „**: Java 8 μ „μ©  
**λ°°ν¬ μƒνƒ**: β οΈ λ°°ν¬ μ „

