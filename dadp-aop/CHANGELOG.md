# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

---

## [5.3.1] - 2025-12-24 (λ°°ν¬ μ „)

### π”„ Changed

- **Engine URL κ΄€λ¦¬ λ°©μ‹ λ³€κ²½**: Hubμ—μ„ μλ™ μ΅°ν λ°©μ‹ μ κ±°, ν™κ²½λ³€μ μ§μ ‘ μ§€μ • λ°©μ‹μΌλ΅ λ³€κ²½
  - **μ΄μ „**: `DADP_CRYPTO_BASE_URL`μ΄ μ—†μΌλ©΄ `DADP_HUB_BASE_URL`μ„ ν†µν•΄ Hubμ—μ„ μ—”μ§„ URL μλ™ μ΅°ν
  - **ν„μ¬**: `DADP_CRYPTO_BASE_URL` ν™κ²½λ³€μλ΅ μ§μ ‘ μ§€μ • (ν•„μ)
  - **μ΄μ **: Wrapperμ™€ λ™μΌν•κ² λ‚΄λ¶€λ§/μ™Έλ¶€λ§/λ„μ»¤ ν™κ²½μ—μ„ μ μ—°ν•κ² κ΄€λ¦¬ κ°€λ¥ν•λ„λ΅ κ°μ„ 
  - `DadpAopProperties.getEngineBaseUrl()`: Hub μ΅°ν λ΅μ§ μ κ±°
  - `HubCryptoConfig.hubCryptoService()`: Hub μ΅°ν λ΅μ§ μ κ±°

### β¨ Added

- **ν™κ²½λ³€μ μ§μ ‘ κ΄€λ¦¬ μ§€μ›**: `DADP_CRYPTO_BASE_URL` ν™κ²½λ³€μλ΅ Engine URL μ§μ ‘ μ§€μ •
  - λ‚΄λ¶€λ§, μ™Έλ¶€λ§, λ„μ»¤ λ„¤νΈμ›ν¬ λ“± λ‹¤μ–‘ν• ν™κ²½μ—μ„ IP/νΈμ¤νΈλ… μ§μ ‘ μ§€μ • κ°€λ¥
  - Hub μμ΅΄μ„± μ—†μ΄ λ…λ¦½μ μΌλ΅ λ™μ‘ κ°€λ¥

### π—‘οΈ Removed

- **Hub μ—”λ“ν¬μΈνΈ μλ™ μ΅°ν κΈ°λ¥ μ κ±°**: `HubEndpointSyncService`λ¥Ό ν†µν• Hubμ—μ„ μ—”μ§„ URL μ΅°ν κΈ°λ¥ μ κ±°
  - `DADP_AOP_INSTANCE_ID` ν™κ²½λ³€μ: Engine URL μ΅°νμ©μΌλ΅λ” λ” μ΄μƒ μ‚¬μ©λμ§€ μ•μ (μ•λ¦Ό κΈ°λ¥μ—λ” μ—¬μ „ν μ‚¬μ© κ°€λ¥)

### Compatibility

- Product Version: `5.3.1`
- Hub μµμ† λ²„μ „: `3.17.1` (μ•λ¦Ό κΈ°λ¥μ©, μ„ νƒ)
- Engine μµμ† λ²„μ „: `5` (Root POM λ²„μ „κ³Ό λ™κΈ°ν™”, ν•„μ)
- Java μµμ† λ²„μ „: `Java 17` (λ³€κ²½ μ—†μ)
- Breaking Changes: **Yes** (ν™κ²½λ³€μ ν•„μ μ„¤μ • ν•„μ”)
  - β οΈ **λ§μ΄κ·Έλ μ΄μ… ν•„μ**: `DADP_CRYPTO_BASE_URL` ν™κ²½λ³€μ λ°λ“μ‹ μ„¤μ • ν•„μ”

---

## [5.3.0] - 2025-12-19 (λ°°ν¬ μ „)

### π”„ Changed

- **λ²„μ „ μ²΄κ³„ μ „ν™**: 3.17.1 β†’ 5.3.0
  - A=5: Root POM λ²„μ „κ³Ό λ™κΈ°ν™”
  - B=3: Java 17 μµμ† μ”κµ¬μ‚¬ν•­ (λ§¤ν•‘ ID)
  - C=0: μƒ μ²΄κ³„ μ‹μ‘
- **κΈ°λ¥ λ° νΈν™μ„±**: λ³€κ²½ μ—†μ (λ²„μ „ λ²νΈλ§ λ³€κ²½)

### Compatibility

- Product Version: `5.3.0`
- Hub μµμ† λ²„μ „: `3.17.1` (λ³€κ²½ μ—†μ)
- Engine μµμ† λ²„μ „: `5` (Root POM λ²„μ „κ³Ό λ™κΈ°ν™”)
- Java μµμ† λ²„μ „: `Java 17` (λ³€κ²½ μ—†μ)
- Breaking Changes: **No**

---

## [3.17.1] - 2025-12-12 (λ°°ν¬ μ „)

### π‰ λ¦΄λ¦¬μ¦ μ •λ³΄

**λ²„μ „**: 3.17.1  
**λ¦΄λ¦¬μ¦ μΌμ**: 2025-12-12 (μµμΆ… μ—…λ°μ΄νΈ)  
**λ°°ν¬ μƒνƒ**: β οΈ **κ°λ° μ™„λ£, Maven Central λ―Έλ°°ν¬** (λ°°ν¬ μ „)

### β… Changed

- **includeStats μ—­ν•  λ…ν™•ν™” λ° μ—”μ§„ μ”μ²­ κ°μ„ **: `includeStats` νλΌλ―Έν„°κ°€ AOP λ΅κΉ…μ©μΌλ΅λ§ μ‚¬μ©λλ„λ΅ μμ •ν•κ³ , μ—”μ§„ μ”μ²­μ—μ„ `includeStats` νλΌλ―Έν„°λ¥Ό μ κ±°
  - `includeStats=true`μΌ λ• AOP λ λ²¨μ—μ„λ§ μƒμ„Έ λ΅κ·Έλ¥Ό μ¶λ ¥ (μ•”λ³µνΈν™” μν–‰, κ²°κ³Ό μΌλ¶€ κ°’)
  - μ—”μ§„ μ”μ²­μ—μ„ `includeStats` νλΌλ―Έν„°λ¥Ό μ™„μ „ν μ κ±° (μ—”μ§„μ€ μλ™μΌλ΅ ν†µκ³„ μμ§‘)
  - AOPμ—μ„ `cryptoService.encrypt(data, policy)` ν•νƒλ΅ νΈμ¶ (includeStats νλΌλ―Έν„° μ—†μ)
  - `HubCryptoService`μ—μ„ `EncryptRequest`/`DecryptRequest`μ— `includeStats` ν•„λ“λ¥Ό μ„¤μ •ν•μ§€ μ•μ
  - `includeStats`λ” AOP μμ²΄μ λ΅κΉ… κΈ°λ¥μ΄λ©°, μ—”μ§„ ν†µκ³„ μμ§‘κ³Όλ” λ¬΄κ΄€
  - μ—”μ§„ μ”μ²­ ν¬κΈ° κ°μ† (λ¶ν•„μ”ν• νλΌλ―Έν„° μ κ±°)
  - κΈ°μ΅΄ μ½”λ“ λ³€κ²½ λ¶ν•„μ” (λ™μ‘ λ°©μ‹λ§ λ³€κ²½)

### β… Fixed

- **Stream λ°ν™ νƒ€μ… read-only νΈλμ­μ… λ¬Έμ  ν•΄κ²°** (2025-12-12)
  - Stream λ³µνΈν™” μ‹ read-only νΈλμ­μ…μ—μ„ UPDATE μΏΌλ¦¬ μ‹λ„λ΅ μΈν• μ—λ¬ ν•΄κ²°
  - Streamμ„ Listλ΅ μμ§‘ν• μ§ν›„, λ³µνΈν™” μ „μ— λ¨λ“  μ—”ν‹°ν‹°λ¥Ό detachν•μ—¬ Hibernateμ λ³€κ²½ μ¶”μ  μ°¨λ‹¨
  - `handleStreamDecryption()` λ©”μ„λ“μ— EntityManager νλΌλ―Έν„° μ¶”κ°€
  - detachλ μ—”ν‹°ν‹°λ” λ³µνΈν™” ν›„μ—λ„ dirtyλ΅ λ§ν‚Ήλμ§€ μ•μ•„ read-only νΈλμ­μ…μ—μ„ μ •μƒ λ™μ‘
  - μ—λ¬ λ©”μ‹μ§€: `Connection is read-only. Queries leading to data modification are not allowed` ν•΄κ²°
  - μν–¥: `getAllUsersAsStream()`, `getUsersByNameAsStream()` λ“± Stream λ°ν™ λ©”μ„λ“ μ •μƒ λ™μ‘

### (κΈ°νƒ€ κ°λ° μ¤‘)

μ΄ λ²„μ „μ€ ν„μ¬ κ°λ° μ¤‘μ΄λ©°, μ•„μ§ λ°°ν¬λμ§€ μ•μ•μµλ‹λ‹¤.

---

## [3.17.0] - 2025-12-09

### π‰ λ¦΄λ¦¬μ¦ μ •λ³΄

**λ²„μ „**: 3.17.0  
**λ¦΄λ¦¬μ¦ μΌμ**: 2025-12-05  
**λ°°ν¬ μΌμ**: 2025-12-09  
**μ£Όμ” κ°μ„ μ‚¬ν•­**: Engine μ§μ ‘ μ—°κ²°, λ¦¬ν¬μ§€ν† λ¦¬ λ λ²¨ μ•”λ³µνΈν™” μ§€μ›, `findAll()` λ°°μΉ λ³µνΈν™” μµμ ν™” (μ•½ 3λ°° μ„±λ¥ ν–¥μƒ)

### β οΈ μ¤‘μ”: νΈν™μ„±

**μ΄μ „ λ²„μ „κ³Ό νΈν™λμ§€ μ•μµλ‹λ‹¤:**
- **v2.1.0** β†’ **v3.17.0**: νΈν™μ„± κΉ¨μ§ (major λ²„μ „ μ¦κ°€)
- **μ„¤μ • λ³€κ²½ ν•„μ”**: `hub.crypto.base-url`μ„ Engine/Gateway URLλ΅ λ³€κ²½
- **μ½”λ“ λ³€κ²½ κ¶μ¥**: λ¦¬ν¬μ§€ν† λ¦¬ λ λ²¨ μ•”λ³µνΈν™”λ΅ μ „ν™

### β… Added

- **Engine μ§μ ‘ μ—°κ²° μ§€μ›**
  - Hubλ¥Ό κ±°μΉμ§€ μ•κ³  Engineμ— μ§μ ‘ μ•”λ³µνΈν™” μ”μ²­
  - μ„±λ¥ ν–¥μƒ (Hub κ²½μ  μ§€μ—° μ κ±°)
  - Gateway URL μ§€μ›
- **λ¦¬ν¬μ§€ν† λ¦¬ λ λ²¨ μ•”λ³µνΈν™” μ§€μ› (κ¶μ¥)**
  - λ¦¬ν¬μ§€ν† λ¦¬ λ©”μ„λ“μ— `@Encrypt`/`@Decrypt` μ–΄λ…Έν…μ΄μ… μ μ©
  - μ„λΉ„μ¤ λ μ΄μ–΄μ™€ λ¦¬ν¬μ§€ν† λ¦¬ λ μ΄μ–΄ λ¶„λ¦¬
  - μΌκ΄€μ„± μλ” μ•”λ³µνΈν™” μ²λ¦¬
- **`findAll()` λ°°μΉ λ³µνΈν™” μµμ ν™”**
  - `CryptoService.batchDecrypt()` λ©”μ„λ“ μ¶”κ°€
  - `HubCryptoService.batchDecrypt()` λ©”μ„λ“ μ¶”κ°€
  - κ°λ³„ λ³µνΈν™” λ€λΉ„ μ•½ 3λ°° μ΄μƒ μ„±λ¥ ν–¥μƒ (1000κ±΄ μ΅°ν μ‹: 7.15μ΄ β†’ 2.31μ΄)
- **λ°°μΉ μ•”νΈν™” μ§€μ›**
  - `CryptoService.batchEncrypt()` λ©”μ„λ“ μ¶”κ°€
  - `HubCryptoService.batchEncrypt()` λ©”μ„λ“ μ¶”κ°€
  - ν•λ‚μ κ°μ²΄ λ‚΄ μ—¬λ¬ ν•„λ“ μ•”νΈν™” μ‹ λ°°μΉ μ²λ¦¬
- **μ•λ¦Ό κΈ°λ¥ ν†µμΌ**
  - `dadp-hub-crypto-lib`μ `HubNotificationClient` μ‚¬μ©
  - μ•λ¦Ό μ •μ±… ν†µμΌ
- **ν™κ²½λ³€μ ν†µμΌ**
  - `DADP_CRYPTO_BASE_URL` (ν•„μ)
  - `DADP_HUB_BASE_URL` (μ„ νƒ, μ•λ¦Όμ©)

### π”§ Changed

- **μ„¤μ • λ³€κ²½**
  - `hub.crypto.base-url`: Hub URL β†’ Engine/Gateway URL
  - `hub.crypto.api-base-path`: `/hub/api/v1` β†’ `/api` (Engine) λλ” `/hub/api/v1` (Hub)
- **ν…μ¤νΈ μ•± κ°μ„ **
  - κ°λ³„ ν…μ¤νΈ μµμ… μ κ±° (`findById` κΈ°λ° κ°λ³„ μ΅°ν ν…μ¤νΈ μ κ±°)
  - `findAll`/`saveAll` ν†µμΌ
  - λ¶ν•„μ”ν• μ½”λ“ μ κ±° (`getAllUserIds()` λ“±)
  - ν”„λ΅ νΈμ—”λ“ UI μ •λ¦¬

### π”§ Fixed

- **AOP λ³µνΈν™” λ¬Έμ  ν•΄κ²°**
  - λ¦¬ν¬μ§€ν† λ¦¬ λ©”μ„λ“μ— μ–΄λ…Έν…μ΄μ… μ μ©μΌλ΅ λ³µνΈν™” μ •μƒ λ™μ‘
- **μ„±λ¥ μµμ ν™” κ²€μ¦ μ™„λ£**
  - `findAll()` λ°°μΉ λ³µνΈν™” μ„±λ¥ μΈ΅μ • λ° λ¶„μ„ μ™„λ£

### β οΈ Deprecated

- **μ„λΉ„μ¤ λ λ²¨ μ•”λ³µνΈν™”**
  - λ¦¬ν¬μ§€ν† λ¦¬ λ λ²¨ μ•”λ³µνΈν™” μ‚¬μ© κ¶μ¥
  - ν–¥ν›„ λ²„μ „μ—μ„ μ κ±° μμ •

### π“ Known Issues

- **`saveAll()` λ°°μΉ μ•”νΈν™” λ―Έμ§€μ›**
  - Spring Data JPAμ κµ¬μ΅°μ  μ μ•½μΌλ΅ μΈν•΄ κ°λ³„ μ•”νΈν™”λ§ μ§€μ›
  - κ° μ—”ν‹°ν‹°λ³„λ΅ κ°λ³„ μ•”νΈν™” API νΈμ¶ λ°μƒ
- **`@Query` λ„¤μ΄ν‹°λΈ μΏΌλ¦¬ λ―Έμ§€μ›**
  - ν–¥ν›„ μ§€μ› μμ •
- **`Page<T>`, `Slice<T>` λ°ν™ νƒ€μ… λ―Έμ§€μ›**
  - ν–¥ν›„ μ§€μ› μμ •

---

## [2.1.0] - 2025-11-06

### π‰ λ¦΄λ¦¬μ¦ μ •λ³΄

**λ²„μ „**: 2.1.0  
**λ¦΄λ¦¬μ¦ μΌμ**: 2025-11-06  
**μ£Όμ” κ°μ„ μ‚¬ν•­**: Maven Central λ°°ν¬ μ™„λ£, Hub μ•”λ³µνΈν™” λΌμ΄λΈλ¬λ¦¬ ν†µν•©

### β… Added

- **Maven Central λ°°ν¬ μ™„λ£**
  - Group ID: `io.github.daone-dadp`
  - Artifact ID: `dadp-aop`, `dadp-aop-spring-boot-starter`
- **Hub μ•”λ³µνΈν™” λΌμ΄λΈλ¬λ¦¬ ν†µν•©**
  - `dadp-hub-crypto-lib` μμ΅΄μ„± μ¶”κ°€
- **Spring Boot Starter ν¨ν‚¤μ§€**
  - μλ™ μ„¤μ • λ° μμ΅΄μ„± κ΄€λ¦¬

### π”§ Changed

- **Group ID λ³€κ²½**
  - `com.dadp` β†’ `io.github.daone-dadp`
- **Maven Central λ°°ν¬**
  - JitPackμ—μ„ Maven Centralλ΅ μ „ν™

---

## [2.0.0] - 2025-10-17

### π‰ λ¦΄λ¦¬μ¦ μ •λ³΄

**λ²„μ „**: 2.0.0  
**λ¦΄λ¦¬μ¦ μΌμ**: 2025-10-17  
**μ£Όμ” κ°μ„ μ‚¬ν•­**: μ΄κΈ° λ¦΄λ¦¬μ¦, AOP λΌμ΄λΈλ¬λ¦¬ μ™„μ „ κµ¬ν„

### β… Added

- **AOP λΌμ΄λΈλ¬λ¦¬ μ™„μ „ κµ¬ν„**
  - `dadp-aop`, `dadp-aop-spring-boot-starter` λ¨λ“ μ™„μ„±
  - Spring Auto-Configuration μ§€μ›
- **μ–΄λ…Έν…μ΄μ… μ§€μ›**
  - `@Encrypt`, `@Decrypt`, `@EncryptField`, `@DecryptField`
- **EncryptionAspect AOP κµ¬ν„**
  - λ©”μ„λ“ μ…μ¶λ ¥/ν•„λ“ λ‹¨μ„ μ•”λ³µνΈν™” μΈν„°μ…‰νΈ
- **Hub μ•”λ³µνΈν™” λΌμ΄λΈλ¬λ¦¬ ν†µν•©**
  - `HubCryptoService` μλ™ μ΄κΈ°ν™” κΈ°λ¥

---

**μ°Έκ³ **: μ΄μ „ λ²„μ „(v1.x)μ€ λ‚΄λ¶€ κ°λ° λ²„μ „μΌλ΅ κ³µκ°λμ§€ μ•μ•μµλ‹λ‹¤.

